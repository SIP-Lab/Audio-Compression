//
// Created by shashank on 6/5/2018.
//

#ifndef INTEGRATED_APP_ANDROID_EQUALIZER_H

#include <stdlib.h>
#include <string.h>

typedef struct Equalizer {
    int saveUserBandGains;
    int TotalDetectedNoiseClass;
    int prevDetectedNoiseClass;
    int count;
    float* smoothBandGains;
    const char* pathHybridDir;
    float** userBandGains;
} Equalizer;

Equalizer* initEqualizer(int SaveDataSwitch,
                         int HybridModeSwitch,
                         const char* pathHybridDir,
                         int MaxClusterNum,
                         int TotalDetectedClass);
void getSmoothBandGains(Equalizer* Equalization, float* userBandGains, int clusterLabel, int prevClusterLabel, int totalClusters);
void destroyEqualizer(Equalizer** Equalization);

static const double cosTable[256] = {1,0.900968867902419,0.623489801858734,0.222520933956314,-0.222520933956314,
                                     -0.623489801858734,-0.900968867902419,-1,1,0.978147600733806,0.913545457642601,
                                     0.809016994374948,0.669130606358858,0.500000000000000,0.309016994374947,
                                     0.104528463267653,-0.104528463267653,-0.309016994374947,-0.500000000000000,
                                     -0.669130606358858,-0.809016994374948,-0.913545457642601,-0.978147600733806,
                                     -1,1,0.990685946036331,0.962917287347799,0.917211301505453,0.854419404546489,
                                     0.775711290704420,0.682553143218654,0.576680322114867,0.460065037731152,
                                     0.334879612170986,0.203456013052634,0.0682424133646711,-0.0682424133646711,
                                     -0.203456013052634,-0.334879612170986,-0.460065037731152,-0.576680322114867,
                                     -0.682553143218654,-0.775711290704420,-0.854419404546489,-0.917211301505453,
                                     -0.962917287347799,-0.990685946036331,-1,1,0.997766878623153,0.991077488154780,
                                     0.979961705036587,0.964469175054377,0.944669091607919,0.920649886676429,
                                     0.892518835859881,0.860401579260139,0.824441560341760,0.784799385278661,
                                     0.741652105647958,0.695192427674642,0.645627851558802,0.593179744729355,
                                     0.538082353163373,0.480581755186684,0.420934762428335,0.359407772837513,
                                     0.296275580885634,0.231820150267528,0.166329354583130,0.100095691624098,
                                     0.0334149770076746,-0.0334149770076746,-0.100095691624098,-0.166329354583130,
                                     -0.231820150267528,-0.296275580885634,-0.359407772837513,-0.420934762428335,
                                     -0.480581755186684,-0.538082353163373,-0.593179744729355,-0.645627851558802,
                                     -0.695192427674642,-0.741652105647958,-0.784799385278661,-0.824441560341760,
                                     -0.860401579260140,-0.892518835859881,-0.920649886676429,-0.944669091607919,
                                     -0.964469175054377,-0.979961705036587,-0.991077488154780,-0.997766878623153,
                                     -1,1,0.999453257340926,0.997813627218775,0.995082902545011,0.991264069326975,
                                     0.986361303402722,0.980379965874809,0.973326597248006,0.965208910277349,
                                     0.956035781534358,0.945817241700635,0.934564464599461,0.922289754977385,
                                     0.909006535049163,0.894729329820764,0.879473751206489,0.863256480957574,
                                     0.846095252420936,0.828008831148020,0.809016994374948,0.789140509396394,
                                     0.768401110856859,0.746821476984154,0.724425204791089,0.701236784272489,
                                     0.677281571625741,0.652585761524169,0.627176358473537,0.601081147283025,
                                     0.574328662682944,0.546948158122427,0.518969573781215,0.490423503830508,
                                     0.461341162978688,0.431754352338493,0.401695424652970,0.371197248918221,
                                     0.340293174441643,0.309016994374947,0.277402908761845,0.245485487140799,
                                     0.213299630743747,0.180880534332110,0.148263647711842,0.115484636969586,
                                     0.0825793454723324,0.0495837546732225,0.0165339447663584,-0.0165339447663584,
                                     -0.0495837546732222,-0.0825793454723322,-0.115484636969586,-0.148263647711842,
                                     -0.180880534332110,-0.213299630743747,-0.245485487140799,-0.277402908761844,
                                     -0.309016994374947,-0.340293174441643,-0.371197248918221,-0.401695424652969,
                                     -0.431754352338493,-0.461341162978688,-0.490423503830508,-0.518969573781215,
                                     -0.546948158122427,-0.574328662682944,-0.601081147283025,-0.627176358473537,
                                     -0.652585761524169,-0.677281571625741,-0.701236784272488,-0.724425204791089,
                                     -0.746821476984154,-0.768401110856859,-0.789140509396394,-0.809016994374948,
                                     -0.828008831148020,-0.846095252420935,-0.863256480957574,-0.879473751206489,
                                     -0.894729329820763,-0.909006535049162,-0.922289754977385,-0.934564464599461,
                                     -0.945817241700635,-0.956035781534358,-0.965208910277349,-0.973326597248006,
                                     -0.980379965874809,-0.986361303402722,-0.991264069326975,-0.995082902545011,
                                     -0.997813627218775,-0.999453257340926,-1,1,0.998756921218922,0.995030775365401,
                                     0.988830826225129,0.980172487848544,0.969077286229078,0.955572805786141,
                                     0.939692620785908,0.921476211870408,0.900968867902419,0.878221573370229,
                                     0.853290881632156,0.826238774315995,0.797132507222922,0.766044443118978,
                                     0.733051871829826,0.698236818086073,0.661685837596859,0.623489801858734,
                                     0.583743672234790,0.542546263865759,0.500000000000000,0.456210657353163,
                                     0.411287103130611,0.365341024366395,0.318486650251684,0.270840468143005,
                                     0.222520933956314,0.173648177666930,0.124343704647485,0.0747300935864241,
                                     0.0249306917380729,-0.0249306917380729,-0.0747300935864244,-0.124343704647485,
                                     -0.173648177666930,-0.222520933956314,-0.270840468143005,-0.318486650251684,
                                     -0.365341024366395,-0.411287103130612,-0.456210657353163,-0.500000000000000,
                                     -0.542546263865759,-0.583743672234790,-0.623489801858734,-0.661685837596860,
                                     -0.698236818086073,-0.733051871829826,-0.766044443118978,-0.797132507222923,
                                     -0.826238774315995,-0.853290881632156,-0.878221573370229,-0.900968867902419,
                                     -0.921476211870408,-0.939692620785908,-0.955572805786141,-0.969077286229078,
                                     -0.980172487848544,-0.988830826225129,-0.995030775365401,-0.998756921218922,-1};
static const int a[7] = {0, 8, 24, 48, 96, 192, 256};

#define INTEGRATED_APP_ANDROID_EQUALIZER_H

#endif //INTEGRATED_APP_ANDROID_EQUALIZER_H
